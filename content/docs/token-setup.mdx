---
title: Token Setup for Documentation Sync
description: Configure GitHub tokens for the documentation sync system
---

# Token Setup for Documentation Sync

This guide explains how to set up the necessary tokens for the documentation sync system to work properly.

## Required Tokens

### 1. GITHUB_TOKEN (Automatic)

**Status**: **Already configured**

The `GITHUB_TOKEN` is automatically provided by GitHub Actions and doesn't require manual setup. It's used in the GitHub Actions workflow to:

- Fetch content from the BetterGov repository
- Create commits and push changes
- Create pull requests

**Location**: Automatically injected into GitHub Actions environment

### 2. Personal Access Token (Optional)

For running `npm run sync-docs` locally or if you encounter rate limiting issues, you may need a personal GitHub token.

#### Creating a Personal Access Token

1. **Go to GitHub Settings**
   - Navigate to [GitHub Settings](https://github.com/settings/tokens)
   - Click **Developer settings** → **Personal access tokens** → **Tokens (classic)**

2. **Generate New Token**
   - Click **Generate new token** → **Generate new token (classic)**
   - Give it a descriptive name: `BetterGov Docs Sync`

3. **Set Expiration**
   - Choose an appropriate expiration (recommended: 90 days or 1 year)

4. **Select Scopes**
   - **repo** (Full control of private repositories)
     - **repo:status** (Access commit status)
     - **repo_deployment** (Access deployment status)
     - **public_repo** (Access public repositories)

5. **Generate and Copy**
   - Click **Generate token**
   - **Important**: Copy the token immediately (you won't see it again)

#### Using the Personal Access Token

**Option A: Environment Variable (Recommended)**
```bash
# Set the token as an environment variable
export GITHUB_TOKEN=your_token_here

# Then run the sync
npm run sync-docs
```

**Option B: .env File**
```bash
# Create .env file in project root
echo "GITHUB_TOKEN=your_token_here" > .env

# Add .env to .gitignore (if not already there)
echo ".env" >> .gitignore
```

**Option C: Direct Command**
```bash
# Run with token inline (not recommended for security)
GITHUB_TOKEN=your_token_here npm run sync-docs
```

## Token Permissions Explained

### GitHub Actions (GITHUB_TOKEN)
- **Automatic**: Provided by GitHub
- **Permissions**: Limited to the current repository
- **Rate Limits**: Higher limits for GitHub Actions
- **Security**: Automatically scoped and secure

### Personal Access Token
- **Manual**: You create and manage
- **Permissions**: Based on what you select
- **Rate Limits**: Standard GitHub API limits
- **Security**: Keep secure and rotate regularly

## Rate Limiting

### Without Token
- **Limit**: 60 requests per hour per IP
- **Issue**: May hit limits during sync

### With Token
- **Limit**: 5,000 requests per hour
- **Benefit**: Much higher rate limits

## Security Best Practices

### Token Storage
- **Environment variables**: Store in `.env` file (add to `.gitignore`)
- **GitHub Secrets**: Use for CI/CD workflows
- **Hardcoded**: Never commit tokens to code
- **Public**: Never share tokens publicly

### Token Rotation
- **Regular rotation**: Change tokens every 90 days
- **Monitor usage**: Check token usage in GitHub settings
- **Revoke compromised**: Immediately revoke if compromised

### Access Control
- **Minimal permissions**: Only grant necessary scopes
- **Repository-specific**: Use fine-grained tokens when possible
- **Monitor activity**: Review token usage regularly

## Troubleshooting

### "API rate limit exceeded"
- **Solution**: Add a personal access token
- **Alternative**: Wait for rate limit to reset (1 hour)

### "Authentication failed"
- **Check**: Token is valid and not expired
- **Verify**: Token has correct permissions
- **Test**: Token works with GitHub API

### "Repository not found"
- **Check**: Repository name is correct
- **Verify**: Token has access to the repository
- **Confirm**: Repository is public or token has access

## Testing Token Setup

### Test GitHub API Access
```bash
# Test with curl (replace YOUR_TOKEN)
curl -H "Authorization: token YOUR_TOKEN" \
     https://api.github.com/repos/bettergovph/bettergov/contents/README.md
```

### Test Sync Script
```bash
# Run sync with token
GITHUB_TOKEN=your_token npm run sync-docs
```

## Environment Setup

### For Development
```bash
# Add to your shell profile (.bashrc, .zshrc, etc.)
export GITHUB_TOKEN=your_token_here
```

### For CI/CD
```yaml
# In GitHub Actions (already configured)
env:
  GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
```

### For Docker
```dockerfile
# In Dockerfile
ENV GITHUB_TOKEN=your_token_here
```

## Summary

- **GitHub Actions**: Uses automatic `GITHUB_TOKEN`
- **Local Development**: Optional personal access token
- **Rate Limits**: Token increases limits significantly
- **Security**: Store tokens securely, never commit to code

The sync system will work without additional tokens, but adding a personal access token improves reliability and rate limits for local development.
